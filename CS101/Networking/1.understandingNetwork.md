### 네트워크 통신
iOS 는 서버와 어떻게 통신하고 데이터를 처리하는가?
우선 이렇게 간략히 정리해두고 시간을 들여서 독서와 강의를 통해 이해의 깊이를 더해야 한다.

사용자의 컴퓨터와 아이폰(클라이언트)을 통해 인터넷, 웹에 접속할 수 있다.
인터넷, 웹을 호스팅하는 서버로서의 컴퓨터가 존재
대체 어떻게 이게 가능한 걸까?

1. TCP/IP 프로토콜!
- HTTP, IP(인터넷 프로토콜), FTP, TCP(전송제어), UDP ... 종류가 많다
- 위의 여러 종류들이 알게 모르게 작용해서 네트워킹을 가능하게 해준다.

2. WWW를 구성하는 기술
- HTML : HyperText Markup Language
- HTTP : HyperText Transfer Protocol
    + 하이퍼 문서를 전송하는 것으로부터 시작되었다.
    + 현재 기술 시점으로 이미지, 영상, 음성, 파일, JSON 등 모든 형태의 데이터가 전송되고 있다.
    + 인터넷의 거의 모든 것은 HTTP로 구성된다.
    + 1990년 HTTP 0.9 등장하여 1996 HTTP 1.0
        * HTTP Object Model 탄생
        * 4년 후 REST API 가 된다!
    + 2014년까지 HTTP 1.1(이 시점에 대부분의 기능이 내장되었다)
    + 현재는 단순 성능 개선 업데이트가 이루어지고 있다.
    + RFC : HTTP 사용 규약을 정리 공식문서라고 이해하면 좋다.
      인터넷 기술에 적용 가능한 새로운 연구, 혁신, 기법 등을 아우르는 메모!

- URL : Uniform Resource Locator

### 네트워킹

클라이언트의 APP, OS, LAN 계층에서 각기 다른 프로토콜을 활용한다.
- **APP 계층**에서 HTTP 규약에 맞게 네트워크 '리퀘스트'
    + 데이터를 어떻게 주고 받을지 약속이 HTTP에 정리되어 있다.
- 이렇게 작성된 리퀘스트는 **OS 계층**의 TCP에서 분리하고 PORT를 붙인다.
  PORT 로 어떤 앱과 통신할지 확인이 가능하고 주고받을 상태를 확인하고 검증한다.
  연결과 순서, 검증이 이루어진다.
  클라이언트에서 어디로 리퀘스트를 보낼지 결정하기 위해 IP 주소를 작성한다.
- LAN 계층에서 리퀘스트를 서버에 보낸다. MAC주소가 추가된다.

서버는 받은 리퀘스트를 역순으로 해석한다.

### HTTP
리퀘스트(HTTP 요청 메시지)를 올바른 형식으로 작성해야 한다.
앱에서 작성될 리퀘스트는 대략 이런 형태이다.
- 첫번째 줄은 '시작라인'. 요청의 방식이다.
    + 메소드, 요청대상과 경로, HTTP버전을 작성한다.
- 그 다음 줄은 header 필드가 있다.
    + HTTP 전송에 필요한 메타데이터를 담는다.
- header 필드 이후 공백 라인, 그 이후로는 메세지 본문이 있다.
- 메세지 바디가 실제 전송할 데이터를 담고 있다.
    + JSON, HTML ... 등등

```
GET /index.html HTTP /1.1
Host: www.naver.com

POST /form/entry HTTP /1.1
Host: www.naver.com

```
이 리퀘스트를 OS-LAN 에서 서버로 요청한다.
서버 컴퓨터는 HTTP 응답을 이렇게 보낸다. 물론 예시 중 하나일 뿐
- 첫번째 줄은 HTTP 버전과 상태 코드, 상태 코드에 대한 문구가 적혀있다.
- 그 외의 형태는 클라이언트 리퀘스트와 유사하다.

```
HTTP /1.1 200 OK
Date: Wed, 06 Jul 2022 06:40:14 GMT
Content-Length: 352
Content-Type: text/html

<html>
...
</html>
```

### ✨Method?
- GET : 리소스를 취득하여 '조회'한다.
    + HTTP 1.0, 1.1에서 채택하고 있다.
    + 게시판의 글을 읽는다거나... 데이터를 단순 표시하는 리퀘스트 메소드
- POST : 엔티티를 등록한다.
    + HTTP 1.0, 1.1에서 채택하고 있다.
    + 게시판에 글을 쓰고, 댓글을 달고.. 데이터를 등록할 수 있다.
- PUT : 데이터를 대체하거나 파일을 전송한다.
    + HTTP 1.0, 1.1에서 채택하고 있다.
    + 게시판의 게시글을 수정할 수 있다. 데이터를 '대체'한다.
- PATCH : PUT에서 필요한 리소스 부분을 변경
    + HTTP 1.1에서 채택하고 있다.
    + 게시글에 좋아요를 누른다거나?
- DELETE : 파일을 삭제한다.
    + HTTP 1.0, 1.1에서 채택하고 있다.
    + 게시물을 삭제한다.

그 외 여러 프로토콜 메소드가 있다.
CRUD(Create, Read, Update, Delete)
=> POST, GET, PUT, DELETE

### 응답상태코드
- 1xx : informational - 리퀘스트 처리중임
- 2xx : Success - 리퀘스트 정상 처리
    + 200 OK
    + 201 Created
    + 202 Accepted : 요청 접수는 되었는데 처리는 아직
    + 204 No Content : 서버가 성공적으로 수행했는데 응답으로 보낼 데이터가 없음
- 3xx : Redirection - 리퀘스트 정상 처리를 위해 추가 동작 필요
- 4xx : Client Error - 서버 리퀘스트 이해 불가 = 잘못된 요청
    + "야, 너 프로토콜 약속대로 안 해?"
    + 400 Bad Request : 요청 구문, 파라미터, 메세지 등 오류
    + 401 Unauthorized : 사용자 인증이 되지 않음
    + 403 Forbidden : 요청은 접수 되었는데 처리가 완료되지 않음 (어드민 권한이 필요하거나)
    + 404 Not Found : 요청 리소스가 서버에 없음
- 5xx : Server Error - 서버 리퀘스트 처리 실패 = 서버 내부 문제
    + 서버 다운이나 서버 점검 중 접속 시도라거나
    + 500 Internal Server Error : 서버 내부 문제로 오류
      대체로 애매한 서버 오류는 500으로 처리됨
    + 503 Service Unavailable : 서비스 이용 불가 (일시 과부하, 서버 점검)